<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Web Apps with Tools</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <link rel="shortcut icon" href="../../favicon.ico" />

        <!-- For iPad with high-resolution Retina display running iOS ≥ 7: -->
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../images/apple-touch-icon-152x152-precomposed.png">
        <!-- For iPad with high-resolution Retina display running iOS ≤ 6: -->
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../images/apple-touch-icon-144x144-precomposed.png">
        <!-- For iPhone with high-resolution Retina display running iOS ≥ 7: -->
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../images/apple-touch-icon-120x120-precomposed.png">
        <!-- For iPhone with high-resolution Retina display running iOS ≤ 6: -->
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../images/apple-touch-icon-114x114-precomposed.png">
        <!-- For the iPad mini and the first- and second-generation iPad on iOS ≥ 7: -->
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../images/apple-touch-icon-76x76-precomposed.png">
        <!-- For the iPad mini and the first- and second-generation iPad on iOS ≤ 6: -->
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../images/apple-touch-icon-72x72-precomposed.png">
        <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
        <link rel="apple-touch-icon-precomposed" href="../../apple-touch-icon-precomposed.png">



		<link rel="stylesheet" href="../../bower_components/reveal.js/css/reveal.min.css">
        <link rel="stylesheet" href="../../bower_components/reveal.js/css/theme/beige.css" id="theme">
		<link rel="stylesheet" href="../../styles/26d0b258.lecture.css"/>
		<!-- For syntax highlighting -->
        <link rel="stylesheet" href="/bower_components/highlightjs/styles/dark.css">
        
        
        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
                document.write( '<link rel="stylesheet" href="../../bower_components/reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>
        <style>
        
        	body {
        		background:none;
        	}
			.reveal svg{
				max-width: 95%;
				max-height: 95%;
				margin-left: auto;
				margin-right: auto;
				display: block;
			}
        	.reveal .slides {
				text-align: left;
			}
			.reveal dt {
				font-weight: bold;
			}
			.reveal dd {
				margin-left:1em;
			}
			.reveal input {
				font-size: inherit;
			}
			.reveal .slides>section {
				/*border:1px solid black;*/
			}
			.reveal pre {
				display: block;
				position: relative;
				width: 90%;
				/*margin: 0;*/
				text-align: left;
				font-size: .75em;
				font-family: monospace;
				line-height: 1.2em;
				word-wrap: break-word;
				box-shadow: 0 0 6px rgba(0,0,0,.3);

			}
			.reveal pre code {
				max-height: 600px;
			}
			.reveal ul, .reveal dl{
				margin-bottom: .5em ;
			}
            .reveal li, .reveal dd{
                margin-bottom: .5ex ;
            }
			
            #back{
				position:absolute;
				z-index:100;
				right:5px;
				top:5px;
			}
			#back>a {
				/*font-size: larger;*/
				text-decoration: none;
				color:gray;

			}
			#back>a:hover {
				text-decoration: none;
			}
			/*#back>a:hover:after{
				content: "Back to Outline"
			}*/

        </style>


    </head>
    <body>
        <!--[if lt IE 10]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->


	
	<div id="back"><a href="."><img src="../../favicon.ico" alt="back"></a></div>
    <div class="reveal">
    	<div class="slides">
		<!-- ==== SLIDE ==== -->
		<section id="home">
			<h1>Web Apps with Tools</h1>

			<ul class="unstyled" style="border-left:2px solid #666; padding-left:2ex; margin: 30px">
			
			<li class="x2"><em>Java EE Web Apps</em></li>
		
			<li class="x2"><em>Web Archives</em></li>
		
			<li class="x2"><em>Web Apps with Maven</em></li>
		
			<li class="x2"><em>Web Apps with Tomcat</em></li>
		
			<li class="x2"><em>Web Apps with Eclipse</em></li>
		
		</ul>
		<p class="x2 bottom-right">
		            Le Havre University
		            <br>
		            <em>Yoann Pigné</em>
		            <br>2013
		        </p>
		</section>

    	





<section>
<h2>Web App Classical Patterns</h2>
<p>The <em>Model View Controller</em> is the default and acknowledged design pattern for Web Applications. </p>
	<img src="images/generalMVC.svg" class="maximize-width"  alt="mvc sequence">
</section>

<section>
<h3>MVC pattern</h3>
<p>
	<img src="images/mvc_sequence.png" class="maximize-width" class="noborder" alt="mvc sequence">
</p>
</section>

<section>
	<h3>Java EE (Java Enterprise Edition)</h3>
	<ul>
		<li>A set of specifications for tools that extend the standard Java platform (Java SE).</li>
		<li>Java EE is not a <em>Platform</em>, it is a <em>platform specification</em> : a set of standards like 
		Servlets, JSP, EJB, Java Persistence API, JSON Processing, Web Socket API, ... </li>
		<li>
		Many compatible implementations of the standard: 
			<ul>
				<li>Oracle GlassFish</li>
				<li>IBM WebSphere</li>
				<li>Apache TomEE</li>
				<li>Hitachi uCosminexus</li>
				<li>Red Hat WildFly (Formally JBoss)</li>
			</ul>
		</li>
		<li>2 main features : 
			<ul>
				<li>A web server : serves low-level connexions, requests, cookies, security, ...</li>
				<li>An Application Server : serves high-level interaction between users and applications.</li>
			</ul>
		</li>
	</ul>
</section>


<section>
<h3>Java EE Web App MVC Pattern</h3>
<p>Java EE entities in a typical Web App (client/server) request.</p>
	<img src="images/javaWebAppMVC.svg" class="maximize-width"  alt="mvc sequence">
</section>




<section>
<h2 id="java-ee-servlets">Java EE Servlets</h2>
<ul>
<li>Java classes meant to extend the capabilities of an <em>application server</em>. </li>
<li>Could actually serve any king of network connection.</li>
<li>Mostly used with HTTP.</li>
<li>All HTTP Servlets extend the <code>javax.servlet.http.HttpServlet</code> abstract class.</li>
<li>Main role:<ul>
<li>Manage requests and response objects (<code>HttpServletRequest</code> and <code>HttpServletResponse</code>)</li>
<li>Serve HTTP verbs (<code>GET, POST, PUT, DELETE, ...</code>)</li>
<li>Dispatch requests and call appropriate actions (dealing with Views and Models)</li>
</ul>
</li>
</ul>

</section>


<section>
<h2 id="java-ee-servlets-methods">Java EE Servlets Methods</h2>
<ul>
<li><code>doGet</code>, if the servlet supports HTTP GET requests</li>
<li><code>doPost</code>, for HTTP POST requests</li>
<li><code>doPut</code>, for HTTP PUT requests</li>
<li><code>doDelete</code>, for HTTP DELETE requests</li>
<li><code>init</code> and <code>destroy</code>, to manage resources that are held for the life of the servlet</li>
<li><code>getServletInfo</code>, which the servlet uses to provide information about itself</li>
<li><code>service</code> : receives HTTP requests and dispatches them to the <code>doXXX</code> methods. Should not be overridden. </li>
</ul>

</section>


<section>
<h2 id="exemple-servlet">Exemple Servlet</h2>
<pre><code>import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class TestServlet extends HttpServlet {

    @Override
    public void doGet( HttpServletRequest request, HttpServletResponse response )   
        throws ServletException, IOException {
        // Do something with &#39;request&#39; and &#39;response&#39;
    }
}</code></pre>


</section>




<section>
<h2 id="javaserver-pages-jsp-">JavaServer Pages (JSP)</h2>
<ul>
<li>Fast creation of dynamic web pages</li>
<li>It&#39;s a templating language based on block/tags that can create any output language (HTML, CSS, JS,...)</li>
<li>Main characteristic : new tags with new functionality  can be defined with <code>JavaServer Pages Standard Tag   Library (JSTL)</code></li>
<li>From a JSP a Java Servlet is dynamically created. Then the Servlet is executed to produce the output file. </li>
</ul>
<pre><code>&lt;%@ page pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot; /&gt;
  &lt;title&gt;Test&lt;/title&gt;
  &lt;/head&gt;

  &lt;body&gt;
      &lt;p&gt;Je suis une page générée dynamiquement avec JSP, et je sais compter jusqu&#39;à &lt;%=2+3%&gt; !&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>

</section>

<section>
<h2>Generated Servlet Class from the JSP</h2>
<pre><code class="x-3">/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2013-12-09 21:02:40 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class test_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html>\n");
      out.write("  <head>\n");
      out.write("  <meta charset=\"utf-8\" />\n");
      out.write("  <title>Test</title>\n");
      out.write("  </head>\n");
      out.write("\n");
      out.write("  <body>\n");
      out.write("      <p>Je suis une page générée dynamiquement avec JSP, et je sais compter jusqu'à ");
      out.print(2+3);
      out.write(" !</p>\n");
      out.write("  </body>\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
</code></pre>
</section>


<section>
<h2 id="generated-html-page-from-the-servlet">Generated HTML Page from the Servlet</h2>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot; /&gt;
  &lt;title&gt;Test&lt;/title&gt;
  &lt;/head&gt;

  &lt;body&gt;
      &lt;p&gt;Je suis une page générée dynamiquement avec JSP, et je sais compter jusqu&#39;à 5 !&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>

</section>



<section>
<h2 id="web-archives-war-files-">Web Archives (WAR files)</h2>
<p>Standard format for deploying an application to an application server. </p>
<pre><code>MyApp/
├── WEB-INF/
│   ├── *.jsp
│   ├── classes/
│   │   └── *.class
│   ├── lib/
│   │   └── *.jar
│   └── web.xml
├── *.html
├── *.css
├── *.png
└── *.js</code></pre>
<ul>
<li>Resources outside The <code>WEB-INF/</code> folder are public resources (html, css, js). Inside  <code>WEB-INF</code>, files are not publicly accessible</li>
<li><code>web.xml</code> is the entry point of the application. Contains routing information.</li>
<li>The <code>classes/</code> folder contains compiled Java objects of the application</li>
<li>The <code>lib/</code> folder contains external libraries needed by the application.</li>
</ul>

</section>



<section>
	<h1>Web  Applications With Maven </h1>
</section>

<section>
<h3>Install Maven and bootstrap a project</h3>
<p>Install on Ubuntu.</p>
<pre><code class="bash">sudo apt-get install maven2
</code></pre>
<p>Create a Web App with the ```webapp``` artifact.</p>
<pre><code class="bash">mvn archetype:generate  -DarchetypeArtifactId=maven-archetype-webapp
</code></pre>
<p>3 parameters are asked : </p>
<pre><code class="xml">&lt;groupId&gt;org.pigne&lt;/groupId&gt;
&lt;artifactId&gt;CountDownWebApp&lt;/artifactId&gt;
&lt;version&gt;0.0.1&lt;/version&gt;
</code></pre>    

<p>Add a missing folder (for proper use with Eclipse later on)</p>
<pre><code class="bash">mkdir CountDownWebApp/src/main/java
cd CountDownWebApp</code></pre>
<p>We get a different structure that a normal WAR. </p>
<pre><code class="bash">CountDownWebApp
├── pom.xml
└── src
    └── main
        ├── resources
        └── webapp
            ├── WEB-INF
            │   └── web.xml
            └── index.jsp
</code></pre>
</section>


<section>
<h3>Generated <code>pom.xml</code> file</h3>
<pre><code class="xml">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;org.pigne&lt;/groupId&gt;
  &lt;artifactId&gt;CountDownWebApp&lt;/artifactId&gt;
  &lt;packaging&gt;war&lt;/packaging&gt;
  &lt;version&gt;0.0.1&lt;/version&gt;
  &lt;name&gt;CountDownWebApp Maven Webapp&lt;/name&gt;
  &lt;url&gt;http://maven.apache.org&lt;/url&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;3.8.1&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
  &lt;build&gt;
    &lt;finalName&gt;CountDownWebApp&lt;/finalName&gt;
  &lt;/build&gt;
&lt;/project&gt;
</code></pre>
</section>

<section>
<h3>Add some dependencies to be able to use Java EE libs</h3>

<ul>
	<li>Dependency for Servlets
	<pre><code class="xml">&lt;dependency&gt;
	&lt;groupId&gt;javax.servlet&lt;/groupId&gt;
	&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
	&lt;version&gt;2.5&lt;/version&gt;
	&lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</code></pre></li>
    <li>Dependency for JSP
    <pre><code class="xml">&lt;dependency&gt;
	&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;
	&lt;artifactId&gt;jsp-api&lt;/artifactId&gt;
	&lt;version&gt;2.1&lt;/version&gt;
	&lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
    </li>
</ul>
<p>
Note the <code>&lt;scope&gt;provided&lt;/scope&gt;</code> property the tells maven <b>not</b> to package those dependencies with the WAR file. Servlets and JSP are already part of the destination Application Server.  
</p>
</section>

<section>
	<h1>Tomcat</h1>
	<p>An Lightweight Application Server and Web Server.</p>
	<p>Not a complete Java EE platform.</p>
</section>


<section>
<h3>Install and configure Tomcat </h3>
<p>Installation for Ubuntu</p>
<pre><code class="bash">sudo apt-get install tomcat7</code></pre>
<p>Configure authorizations. In file <code>/somewhere/on/the/machine/tomcat-users.xml</code>: 	</p>
<pre><code class="xml">&lt;tomcat-users&gt;
  &lt;role rolename=&quot;manager-gui&quot;/&gt;
  &lt;role rolename=&quot;manager-script&quot;/&gt;
  &lt;user password=&quot;123soleil&quot; roles=&quot;manager-gui,manager-script&quot; username=&quot;tomcat&quot;/&gt;
&lt;/tomcat-users&gt;</code></pre>

</section>


<section>
	<h3>Maven and Tomcat</h3>
	<p>Add and configure a <code>plugin</code> to the <code>build</code> configuration of the project in the <code>pom.xml</code> file.</p>
<pre><code class="xml">&lt;build&gt;
&lt;finalName&gt;CountDownWebApp&lt;/finalName&gt;
&lt;pluginManagement&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;
      &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;
      &lt;configuration&gt;
        &lt;path&gt;/${project.build.finalName}&lt;/path&gt;
        &lt;update&gt;true&lt;/update&gt;
        &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;
        &lt;username&gt;tomcat&lt;/username&gt;
        &lt;password&gt;123soleil&lt;/password&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/pluginManagement&gt;
&lt;/build&gt;</code></pre>
Note that the login and  password must reflect the ones int the Tomcat configuration.
</section>

<section>
	<h3>Compile and deploy to Tomcat with Maven</h3>
	<pre><code class="bash">mvn tomcat7:redeploy</code></pre>

<pre><code class="bash">[INFO] tomcatManager status code:200, ReasonPhrase:OK
[INFO] OK - Undeployed application at context path /CountDownWebApp
[INFO] OK - Deployed application at context path /CountDownWebApp
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.884s
[INFO] Finished at: Mon Dec 09 23:59:11 CET 2013
[INFO] Final Memory: 13M/33M
[INFO] ------------------------------------------------------------------------
</code></pre>

<p>Let's enjoy our first Web App : <a href="http://localhost:8080/CountDownWebApp/">http://localhost:8080/CountDownWebApp/</a></p>
</section>


<section>
	<h3>Create a Servlet</h3>
	<p> In the <code>src/main/java/</code> folder, under the package names  you  have : <code>src/main/java/org/pigne/CountDown.java</code></p>
<pre><code class="java">package org.pigne;

import java.io.IOException;
import java.io.PrintWriter;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class CountDown extends HttpServlet {

	@Override
	protected void doGet(HttpServletRequest req, HttpServletResponse resp)
			throws ServletException, IOException {
		resp.setContentType(&quot;text/html&quot;);
		resp.setCharacterEncoding(&quot;UTF-8&quot;);
		PrintWriter out = resp.getWriter();
		out.println(&quot;&lt;!DOCTYPE html&gt;&quot;);
		out.println(&quot;&lt;html&gt;&quot;);
		out.println(&quot;&lt;head&gt;&quot;);
		out.println(&quot;&lt;meta charset=\&quot;utf-8\&quot; /&gt;&quot;);
		out.println(&quot;&lt;title&gt;CountDown&lt;/title&gt;&quot;);
		out.println(&quot;&lt;/head&gt;&quot;);
		out.println(&quot;&lt;body&gt;&quot;);
		out.println(&quot;&lt;p&gt;&quot;+diff()+&quot;&lt;/p&gt;&quot;);
		out.println(&quot;&lt;/body&gt;&quot;);
		out.println(&quot;&lt;/html&gt;&quot;);

	}
	private String diff(){
		String theDate = &quot;10/12/2013 12:30:00&quot;;
		String pattern = &quot;dd/MM/yyyy HH:mm:ss&quot;;
		Date d2 = null;
		try {
			d2 = new SimpleDateFormat(pattern).parse(theDate);
		} catch (ParseException e) {
			return &quot;server error...&quot;;
		}
		Date d1 = new Date();
		
		long diff = d2.getTime() - d1.getTime();
		 
		long diffSeconds = diff / 1000 % 60;
		long diffMinutes = diff / (60 * 1000) % 60;
		long diffHours = diff / (60 * 60 * 1000) % 24;
		long diffDays = diff / (24 * 60 * 60 * 1000);
		return diffDays+&quot; jour(s) &quot;+diffHours+&quot; heure(s) &quot;+diffMinutes+&quot; minute(s) &quot;+diffSeconds+&quot; seconde(s)&quot;;
		
	}
}</code></pre>

</section>

<section>
	<h3>Declare the Servlate and associate a route to it </h3>
	<p>The main file in the project is <code>web.xml</code> in <code>src/main/webapp/WEB-INF/</code>:</p>
	<pre><code class="xml">&lt;web-app&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;CountDown&lt;/servlet-name&gt;
		&lt;servlet-class&gt;org.pigne.CountDown&lt;/servlet-class&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;CountDown&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/countdown&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
&lt;/web-app&gt;</code></pre>
<p>Compile / Deploy / <a href="http://localhost:8080/CountDownWebApp/countdown">Test</a></p>
</section>



<section>
<h3>Create A JSP</h3>
<p>We don't whant to write HTML code in the java Servlet to code : separation of concerns</p>
<p>First we create a simple JSP in the public folder : <code>src/main/webapp/CountDownView.jsp</code></p>

<pre><code class="html">&lt;%@ page pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
	&lt;head&gt;
	&lt;meta charset=&quot;utf-8&quot; /&gt;
	&lt;title&gt;CountDown&lt;/title&gt;
	&lt;/head&gt;
	
	&lt;body&gt;
		&lt;p&gt;Je suis une page g&eacute;n&eacute;r&eacute;e dynamiquement avec JSP, mais je ne peux pas vous donner l&#039;heure...&lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre>

<p>Test this JSP's automaticaly generated Servlet : <a href="http://localhost:8080/CountDownWebApp/CountDownView.jsp">http://localhost:8080/CountDownWebApp/CountDownView.jsp</a></p>
<p>Check the Generated java code in the <code>work</code> folder of the  Tomcat App server.</p>
</section>


<section>
<h3>Have the Servlet manage the JSP</h3>

<p>Hide the JSP behind the <code>WEB-INF</code> folder.</p>
<pre><code class="bash">mv src/main/webapp/CountDownView.jsp src/main/webapp/WEB-INF</code></pre>

<p>Modify the servlet</p>
<pre><code class="java">@Override
public void doGet( HttpServletRequest request, HttpServletResponse response )   
	throws ServletException, IOException {
	this.getServletContext().getRequestDispatcher( "/WEB-INF/CountDown.jsp" ).forward( request, response );
}</code></pre>

<p>Compile / Deploy / <a href="http://localhost:8080/CountDownWebApp/countdown">Test</a></p>
</section>



<section>
	<h3>Transfer data to the JSP</h3>
	<p>Modify the Servlet</p>

<pre><code class="java">@Override
public void doGet( HttpServletRequest request, HttpServletResponse response )   
	throws ServletException, IOException {
	String diff = diff();
	request.setAttribute( "diff", diff );
	this.getServletContext().getRequestDispatcher( "/WEB-INF/CountDown.jsp" ).forward( request, response );
}</code></pre>
</section>
<section>
	<h3>Transfer data to the JSP</h3>

<p>Modify the JSP</p>

<pre><code class="html">&lt;%@ page pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta charset=&quot;utf-8&quot; /&gt;
	&lt;title&gt;CountDown&lt;/title&gt;
	&lt;style&gt;
	blockquote {
		font-style: italic;
		padding: 20px;
	}

	blockquote footer{
		color:#555;
		font-weight: bold
	}
	&lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;
	&lt;blockquote&gt;
	&amp;laquo; Il reste 
	&lt;% 
            String diff = (String) request.getAttribute(&quot;diff&quot;);
            out.println( diff );
	%&gt;
	avant la fin de ce cours ! &amp;raquo;
	&lt;footer&gt;
	&lt;% 
            String parametre = request.getParameter( &quot;author&quot; );
            out.println( parametre );
	%&gt;
	&lt;/footer&gt;
	&lt;/blockquote&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

<p>Compile / Deploy / <a href="http://localhost:8080/CountDownWebApp/countdown">Test</a></p>
</section>


<section>
	<h3>Maven & Eclipse</h3>
	<p>create an eclipse project from the Maven configuration:</p>
	<pre><code class="bash">mvn eclipse:eclipse -Dwtpversion=2.0</code></pre>

</section>



    	</div>
	</div>

	<script src="../../scripts/ba414d1e.lecture-all.js"></script>

	<script>
	(function() {
            var list = document.querySelectorAll('*[data-src]');
            for (var i = 0; i < list.length; i++) {
                var p = document.createElement('p')
                var a = document.createElement('a')
                var img = document.createElement('img')
                a.setAttribute('href', list[i].getAttribute('data-src'))
                img.setAttribute('src', '/images/codepen.png')
                img.setAttribute('alt', 'codepen')
                p.setAttribute('class', 'codepen')
                a.appendChild(img)
                p.appendChild(a)
                list[i].appendChild(p)
            }
        })();
        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({

                width: 1400,
                height: 1050,

                // Factor of the display size that should remain empty around the content
                margin: 0.05,

                minScale: 0.1,
                maxScale: 2.0,

                // Optional libraries used to extend on reveal.js
                dependencies: [
                        { src: '../../bower_components/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
                        { src: '../../bower_components/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                        { src: '../../bower_components/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                        { src: '../../bower_components/highlightjs/highlight.pack.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                        { src: '../../bower_components/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                        { src: '../../bower_components/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ],
                // Display controls in the bottom right corner
                controls: true,

                // Display a presentation progress bar
                progress: true,

                // Display the page number of the current slide
                slideNumber: false,

                // Push each slide change to the browser history
                history: true,

                // Enable keyboard shortcuts for navigation
                keyboard: true,

                // Enable the slide overview mode
                overview: true,

                // Vertical centering of slides
                center: true,

                // Enables touch navigation on devices with touch input
                touch: true,

                // Loop the presentation
                loop: false,

                // Change the presentation direction to be RTL
                rtl: false,

                // Turns fragments on and off globally
                fragments: true,

                // Flags if the presentation is running in an embedded mode,
                // i.e. contained within a limited portion of the screen
                embedded: false,

                // Number of milliseconds between automatically proceeding to the
                // next slide, disabled when set to 0, this value can be overwritten
                // by using a data-autoslide attribute on your slides
                autoSlide: 0,

                // Stop auto-sliding after user input
                autoSlideStoppable: true,

                // Enable slide navigation via mouse wheel
                mouseWheel: false,

                // Hides the address bar on mobile devices
                hideAddressBar: true,

                // Opens links in an iframe preview overlay
                previewLinks: false,

                // Transition style
                transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none

                // Transition speed
                transitionSpeed: 'fast', // default/fast/slow

                // Transition style for full page slide backgrounds
                backgroundTransition: 'default', // default/none/slide/concave/convex/zoom

                // Number of slides away from the current that are visible
                viewDistance: 3,

                // Parallax background image
               	parallaxBackgroundImage: '../../images/lecture-bg.svg', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

                // Parallax background size
               	parallaxBackgroundSize: '4995px 1350px' // CSS syntax, e.g. "2100px 900px"
        });
	</script>
	
</body>
</html>
